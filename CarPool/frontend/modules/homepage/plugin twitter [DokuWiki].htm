<!DOCTYPE html>
<!-- saved from url=(0039)https://www.dokuwiki.org/plugin:twitter -->
<html lang="en" dir="ltr" class="js desktop"><object type="{0C55C096-0F1D-4F28-AAA2-85EF591126E7}" cotype="cs" id="cosymantecbfw" style="width: 0px; height: 0px; display: block;"></object><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><![endif]-->
    <title>plugin:twitter [DokuWiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki">
<meta name="robots" content="index,follow">
<meta name="date" content="2013-01-14T12:57:13+0100">
<meta name="keywords" content="plugin,twitter">
<link rel="search" type="application/opensearchdescription+xml" href="https://www.dokuwiki.org/lib/exe/opensearch.php" title="DokuWiki">
<link rel="start" href="https://www.dokuwiki.org/">
<link rel="contents" href="https://www.dokuwiki.org/plugin:twitter?do=index" title="Sitemap">
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="https://www.dokuwiki.org/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="https://www.dokuwiki.org/feed.php?mode=list&ns=plugin">
<link rel="edit" title="Edit this page" href="https://www.dokuwiki.org/plugin:twitter?do=edit">
<link rel="alternate" type="text/html" title="Plain HTML" href="https://www.dokuwiki.org/_export/xhtml/plugin:twitter">
<link rel="alternate" type="text/plain" title="Wiki Markup" href="https://www.dokuwiki.org/_export/raw/plugin:twitter">
<link rel="canonical" href="./plugin twitter [DokuWiki]_files/plugin twitter [DokuWiki].htm">
<link rel="stylesheet" type="text/css" href="./plugin twitter [DokuWiki]_files/css.php">
<script type="text/javascript">/*<![CDATA[*/var NS='plugin';var JSINFO = {"id":"plugin:twitter","namespace":"plugin"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="./plugin twitter [DokuWiki]_files/js.php"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/addInitEvent(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1360177118 115.248.50.23';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="shortcut icon" href="https://www.dokuwiki.org/lib/tpl/dokuwiki/images/favicon.ico">
<link rel="apple-touch-icon" href="https://www.dokuwiki.org/lib/tpl/dokuwiki/images/apple-touch-icon.png">
    <meta name="verify-v1" content="OVxl3gsCv2MhZqh1cBQyl0JytWXSwXMjyvwc+4w3WtA=">
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./plugin twitter [DokuWiki]_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-83791-1");
pageTracker._trackPageview();
</script>
<script type="text/javascript" id="waxCS">var WAX = function () { var _arrInputs; window.addEventListener('waxSetArr', function(evt) {_arrInputs=evt.detail;}); return { getElement: function (i) { return _arrInputs[i]; } } }(); function waxGetElement(i) { return WAX.getElement(i); }</script></head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="dokuwiki site mode_show showSidebar hasSidebar">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="https://www.dokuwiki.org/plugin:twitter#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="https://www.dokuwiki.org/start" accesskey="h" title="[H]"><img src="./plugin twitter [DokuWiki]_files/logo.png" width="64" height="64" alt=""> <span>DokuWiki</span></a></h1>
                    <p class="claim">It's better when it's simple</p>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="https://www.dokuwiki.org/plugin:twitter?do=login&sectok=dd24708798a44afa9a8b4b2d178fd56f" class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="https://www.dokuwiki.org/start" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="search"><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]"><input type="submit" value="Search" class="button" title="Search"><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="https://www.dokuwiki.org/doku.php" method="post" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="plugin:twitter"><input type="hidden" name="sectok" value="dd24708798a44afa9a8b4b2d178fd56f"><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Edit this page</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option></optgroup></select><input type="submit" value="&gt;" style="display: none;"></div><input type="hidden" name="bb2_screener_" value="1360177118 115.248.50.23"></form>            </div>
            <ul>
                <li><a href="https://www.dokuwiki.org/plugin:twitter?do=recent" class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="https://www.dokuwiki.org/plugin:twitter?do=media" class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="https://www.dokuwiki.org/plugin:twitter?do=index" class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">•</span> <span class="curid"><a href="./plugin twitter [DokuWiki]_files/plugin twitter [DokuWiki].htm" class="breadcrumbs" title="plugin:twitter">twitter</a></span></div>
                    </div>
    
    
    <hr class="a11y">
</div></div><!-- /header -->

        <div class="wrapper group">

                            <!-- ********** ASIDE ********** -->
                <div id="dokuwiki__aside"><div class="pad include group">
                    <h3 class="toggle open" style="cursor: pointer; display: none;"><strong><span>−</span></strong>Sidebar</h3>
                    <div class="content" style="">
                                                                        
<p>
<strong>Learn about DokuWiki</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/features" class="wikilink1" title="features">Features</a> &amp; <a href="https://www.dokuwiki.org/blogroll" class="wikilink1" title="blogroll">reviews</a> </div>
</li>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/install" class="wikilink1" title="install">Installation guide</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/manual" class="wikilink1" title="manual">User manual</a> &amp; <a href="https://www.dokuwiki.org/wiki:syntax" class="wikilink1" title="wiki:syntax">syntax</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/changes" class="wikilink1" title="changes">Release notes</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/faq" class="wikilink1" title="faq">FAQ</a></div>
</li>
</ul>

<p>
<strong>Advanced Use</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/extensions" class="wikilink1" title="extensions">Extensions</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/development" class="wikilink1" title="development">Development manual</a></div>
</li>
</ul>

<p>
<strong>Corporate Use</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/faq:support" class="wikilink1" title="faq:support">Get support</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/donate" class="wikilink1" title="donate">Donations</a></div>
</li>
</ul>

<p>
<strong>Our Community</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/teams:getting_involved" class="wikilink1" title="teams:getting_involved">Get involved</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://forum.dokuwiki.org/" class="urlextern" title="http://forum.dokuwiki.org">User forum</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/newsletter" class="wikilink1" title="newsletter">Newsletter</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.dokuwiki.org/mailinglist" class="wikilink1" title="mailinglist">Development mailinglist</a></div>
</li>
</ul>
<hr>

<p>
Follow us on <a href="http://www.facebook.com/pages/DokuWiki/52877633616" class="urlextern" title="http://www.facebook.com/pages/DokuWiki/52877633616">Facebook</a>, <a href="http://twitter.com/dokuwiki" class="urlextern" title="http://twitter.com/dokuwiki">Twitter</a> and other <a href="https://www.dokuwiki.org/social" class="wikilink1" title="social">social networks</a>.
</p>


                                            </div>
                </div></div><!-- /aside -->
            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>plugin:twitter</span></div>

                <div class="page group" style="min-height: 392px;">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle open" style="cursor: pointer;"><strong><span>−</span></strong>Table of Contents</h3>
<div style="">

<ul class="toc">
<li class="level1"><div class="li"><a href="https://www.dokuwiki.org/plugin:twitter#twitter_plugin">twitter plugin</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="https://www.dokuwiki.org/plugin:twitter#description">Description</a></div></li>
<li class="level2"><div class="li"><a href="https://www.dokuwiki.org/plugin:twitter#purpose">Purpose</a></div></li>
<li class="level2"><div class="li"><a href="https://www.dokuwiki.org/plugin:twitter#information">Information</a></div></li>
<li class="level2"><div class="li"><a href="https://www.dokuwiki.org/plugin:twitter#installation">Installation</a></div></li>
<li class="level2"><div class="li"><a href="https://www.dokuwiki.org/plugin:twitter#discussion">Discussion</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="twitter_plugin">twitter plugin</h1>
<div class="level1">
<div class="pluginrepo_entry">
<div class="usageInfo">
<div class="compatibility"><p class="label">Compatible with DokuWiki</p>
<div class="versions"><ul>
<li class="yes">2012-10-13 "Adora Belle"&nbsp;<strong><span>yes</span></strong></li>
<li class="yes">2012-01-25 "Angua"&nbsp;<strong><span>yes</span></strong></li>
<li class="">2011-05-25 "Rincewind"&nbsp;<strong><span>unknown</span></strong></li>
<li class="">2010-11-07 "Anteater"&nbsp;<strong><span>unknown</span></strong></li>
</ul></div>
</div>
<ul class="actions">
<li><a class="download" href="https://github.com/mprins/dokuwiki-twitter/zipball/master">Download</a></li>
<li><a class="bugs" href="https://github.com/mprins/dokuwiki-twitter/issues">Report bugs</a></li>
</ul><div class="clearer"></div>
</div>
<div class="mainInfo">
<p class="description"><a class="media" href="https://www.dokuwiki.org/plugins"><img alt="plugin" class="medialeft" src="./plugin twitter [DokuWiki]_files/dwplugin.png" width="60" height="60"></a> Show tweets or searches from Twitter. previous author Christoph Lang</p>
</div><div class="metaInfo"><dl>
<dt>Last updated on</dt>
<dd>2012-11-13</dd>
<dt>Provides</dt>
<dd><a href="https://www.dokuwiki.org/plugins?plugintype=1#extension__table" class="wikilink1" title="List all Syntax plugins">Syntax</a></dd>
<dt>Repository</dt>
<dd><a class="urlextern" href="https://github.com/mprins/dokuwiki-twitter">Source</a></dd>
</dl></div>
<div class="moreInfo">
<p class="tags">Tagged with <a href="https://www.dokuwiki.org/plugins?plugintag=embed#extension__table" class="wikilink1" title="List all plugins with this tag">embed</a>, <a href="https://www.dokuwiki.org/plugins?plugintag=listing#extension__table" class="wikilink1" title="List all plugins with this tag">listing</a>, <a href="https://www.dokuwiki.org/plugins?plugintag=search#extension__table" class="wikilink1" title="List all plugins with this tag">search</a>, <a href="https://www.dokuwiki.org/plugins?plugintag=social#extension__table" class="wikilink1" title="List all plugins with this tag">social</a>, <a href="https://www.dokuwiki.org/plugins?plugintag=twitter#extension__table" class="wikilink1" title="List all plugins with this tag">twitter</a>, <a href="https://www.dokuwiki.org/plugins?plugintag=users#extension__table" class="wikilink1" title="List all plugins with this tag">users</a></p>
</div>
<div class="authorInfo">
<strong>By <a href="mailto:mprins%20%5Bat%5D%20users%20%5Bdot%5D%20sf%20%5Bdot%5D%20net" class="mail" title="mprins [at] users [dot] sf [dot] net">Mark Prins</a></strong>
<ul>
<li><a href="https://www.dokuwiki.org/plugin:openlayersmap" class="wikilink1" title="plugin:openlayersmap">openlayersmap</a></li>
<li><a href="https://www.dokuwiki.org/plugin:spatialhelper" class="wikilink1" title="plugin:spatialhelper">spatialhelper</a></li>
<li><a href="https://www.dokuwiki.org/plugin:geotag" class="wikilink1" title="plugin:geotag">geotag</a></li>
<li><a href="https://www.dokuwiki.org/plugin:openlayersmapoverlays" class="wikilink1" title="plugin:openlayersmapoverlays">openlayersmapoverlays</a></li>
<li><a href="https://www.dokuwiki.org/plugin:geophp" class="wikilink1" title="plugin:geophp">geophp</a></li>
<li><a href="https://www.dokuwiki.org/plugin:snow" class="wikilink1" title="plugin:snow">snow</a></li>
</ul>
</div>
</div>
</div>
<div class="secedit editbutton_section editbutton_1"><form class="button btn_secedit" method="post" action="./plugin twitter [DokuWiki]_files/plugin twitter [DokuWiki].htm"><div class="no"><input type="hidden" name="do" value="edit"><input type="hidden" name="rev" value="1358164633"><input type="hidden" name="summary" value="[twitter plugin] "><input type="hidden" name="target" value="section"><input type="hidden" name="range" value="1-564"><input type="submit" value="Edit" class="button" title="twitter plugin"></div><input type="hidden" name="bb2_screener_" value="1360177118 115.248.50.23"></form></div>
<h2 class="sectionedit2" id="description">Description</h2>
<div class="level2">

<p>
This syntax will enable users to put tweets and searches from twitter on a page. It uses the media cache thereby bypassing twitter's tracking cookies and complying with EU privacy guidelines.
</p>

</div>
<div class="secedit editbutton_section editbutton_2"><form class="button btn_secedit" method="post" action="./plugin twitter [DokuWiki]_files/plugin twitter [DokuWiki].htm"><div class="no"><input type="hidden" name="do" value="edit"><input type="hidden" name="rev" value="1358164633"><input type="hidden" name="summary" value="[Description] "><input type="hidden" name="target" value="section"><input type="hidden" name="range" value="565-782"><input type="submit" value="Edit" class="button" title="Description"></div><input type="hidden" name="bb2_screener_" value="1360177118 115.248.50.23"></form></div>
<h2 class="sectionedit3" id="purpose">Purpose</h2>
<div class="level2">

<p>
IF you want to show some tweets from twitter on a DokuWiki page, use this Plugin. The syntax is easy:
</p>
<pre class="code">[TWITTER:TYPE:USERNAME/SEARCHWORD:COUNT]</pre>

<p>
Replace the following:
</p>
<ul>
<li class="level1"><div class="li"> <strong>TYPE</strong>: Valid options are <strong>USER</strong> and <strong>SEARCH</strong>: USER will show a timeline of a user and SEARCH will search for a given word on twitter.</div>
</li>
<li class="level1"><div class="li"> <strong>USERNAME/SEARCHWORD</strong>: The name of the user (in USER mode) or word (in search mode).</div>
</li>
<li class="level1"><div class="li"> <strong>COUNT</strong>: The number of tweets to show, when in user mode.</div>
</li>
</ul>

<p>
And here comes some valid examples:
</p>
<pre class="code">//The 5 latest tweets from user schwarzenegger.
[TWITTER:USER:schwarzenegger:5]
//All tweets from user BritneySpears
[TWITTER:USER:BritneySpears]
//Search for the word mj
[TWITTER:SEARCH:mj]
//Search for the word dokuwiki
[TWITTER:SEARCH:dokuwiki]</pre>

<p>
(Not that I would insert them in my DokuWiki <img src="./plugin twitter [DokuWiki]_files/icon_wink.gif" class="icon" alt=";-)"> )
</p>

<p>
Maybe you can use it, to show some tweets related to your company, or insert the Tweets from your employees.
</p>

</div>
<div class="secedit editbutton_section editbutton_3"><form class="button btn_secedit" method="post" action="./plugin twitter [DokuWiki]_files/plugin twitter [DokuWiki].htm"><div class="no"><input type="hidden" name="do" value="edit"><input type="hidden" name="rev" value="1358164633"><input type="hidden" name="summary" value="[Purpose] "><input type="hidden" name="target" value="section"><input type="hidden" name="range" value="783-1749"><input type="submit" value="Edit" class="button" title="Purpose"></div><input type="hidden" name="bb2_screener_" value="1360177118 115.248.50.23"></form></div>
<h2 class="sectionedit4" id="information">Information</h2>
<div class="level2">

<p>
I created that plugin in around 30 minutes, so it's only a first demo and I personally don't like the look.
But at least it's working. I will do some improvements, when I have more free time.
</p>

</div>
<div class="secedit editbutton_section editbutton_4"><form class="button btn_secedit" method="post" action="./plugin twitter [DokuWiki]_files/plugin twitter [DokuWiki].htm"><div class="no"><input type="hidden" name="do" value="edit"><input type="hidden" name="rev" value="1358164633"><input type="hidden" name="summary" value="[Information] "><input type="hidden" name="target" value="section"><input type="hidden" name="range" value="1750-1965"><input type="submit" value="Edit" class="button" title="Information"></div><input type="hidden" name="bb2_screener_" value="1360177118 115.248.50.23"></form></div>
<h2 class="sectionedit5" id="installation">Installation</h2>
<div class="level2">

<p>
Save the following code into default.php and copy it into folder: /lib/plugins/twitter<strong>/conf</strong>
</p>
<dl class="code">
<dt><a href="https://www.dokuwiki.org/_export/code/plugin:twitter?codeblock=2" title="Download Snippet" class="mediafile mf_php">default.php</a></dt>
<dd><pre class="code php"><span class="kw2">&lt;?php</span>
<span class="co4">/**
 * Options for the Twitter plugin
 */</span>
<span class="re0">$conf</span><span class="br0">[</span><span class="st_h">'timeout'</span><span class="br0">]</span>          <span class="sy0">=</span> <span class="nu0">60</span><span class="sy0">;</span>        <span class="co1">// timeout for twitter news cache</span></pre>
</dd></dl>

<p>
Save the following code into the following file names given below and copy it into folder: <strong>/lib/plugins/twitter/</strong>
</p>
<dl class="code">
<dt><a href="https://www.dokuwiki.org/_export/code/plugin:twitter?codeblock=3" title="Download Snippet" class="mediafile mf_php">action.php</a></dt>
<dd><pre class="code php"><span class="kw2">&lt;?php</span>
<span class="co4">/**
 * Twitter Plugin
 *
 * Action plugin component, for cache validity determination; based on the Source Plugin/Action scripts
 *
 * @license    GPL 2 (http://www.gnu.org/licenses/gpl.html)
 * @author     Christopher Smith &lt;chris@jalakai.co.uk&gt; ; rewritten for twitter plugin: Björn Kalkbrenner &lt;terminar@cyberphoria.org&gt;
 */</span>
<span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><a href="http://www.php.net/defined"><span class="kw3">defined</span></a><span class="br0">(</span><span class="st_h">'DOKU_INC'</span><span class="br0">)</span><span class="br0">)</span> <a href="http://www.php.net/die"><span class="kw3">die</span></a><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>  <span class="co1">// no Dokuwiki, no go</span>
&nbsp;
<span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><a href="http://www.php.net/defined"><span class="kw3">defined</span></a><span class="br0">(</span><span class="st_h">'DOKU_PLUGIN'</span><span class="br0">)</span><span class="br0">)</span> <a href="http://www.php.net/define"><span class="kw3">define</span></a><span class="br0">(</span><span class="st_h">'DOKU_PLUGIN'</span><span class="sy0">,</span>DOKU_INC<span class="sy0">.</span><span class="st_h">'lib/plugins/'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="kw1">require_once</span><span class="br0">(</span>DOKU_PLUGIN<span class="sy0">.</span><span class="st_h">'action.php'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="co4">/**
 * All DokuWiki plugins to extend the parser/rendering mechanism
 * need to inherit from this class
 */</span>
<span class="kw2">class</span> action_plugin_twitter <span class="kw2">extends</span> DokuWiki_Action_Plugin <span class="br0">{</span>
&nbsp;
    <span class="co4">/**
     * return some info
     */</span>
    <span class="kw2">function</span> getInfo<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
      <span class="kw1">return</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span>
        <span class="st_h">'author'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Christopher Smith'</span><span class="sy0">,</span>
        <span class="st_h">'email'</span>  <span class="sy0">=&gt;</span> <span class="st_h">'chris@jalakai.co.uk'</span><span class="sy0">,</span>
        <span class="st_h">'date'</span>   <span class="sy0">=&gt;</span> <span class="st_h">'2006-12-22'</span><span class="sy0">,</span>
        <span class="st_h">'name'</span>   <span class="sy0">=&gt;</span> <span class="st_h">'Source Plugin'</span><span class="sy0">,</span>
        <span class="st_h">'desc'</span>   <span class="sy0">=&gt;</span> <span class="st_h">'Twitter plugin cache'</span><span class="sy0">,</span>
        <span class="st_h">'url'</span>    <span class="sy0">=&gt;</span> <span class="st_h">'http://wiki.splitbrain.org/plugin:twitter'</span><span class="sy0">,</span>
      <span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
&nbsp;
    <span class="co4">/**
     * plugin should use this method to register its handlers with the dokuwiki's event controller
     */</span>
    <span class="kw2">function</span> register<span class="br0">(</span><span class="sy0">&amp;</span><span class="re0">$controller</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="re0">$controller</span><span class="sy0">-&gt;</span><span class="me1">register_hook</span><span class="br0">(</span><span class="st_h">'PARSER_CACHE_USE'</span><span class="sy0">,</span><span class="st_h">'BEFORE'</span><span class="sy0">,</span> <span class="re0">$this</span><span class="sy0">,</span> <span class="st_h">'_cache_prepare'</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
&nbsp;
    <span class="co4">/**
     * prepare the cache object for default _useCache action
     */</span>
    <span class="kw2">function</span> _cache_prepare<span class="br0">(</span><span class="sy0">&amp;</span><span class="re0">$event</span><span class="sy0">,</span> <span class="re0">$param</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="re0">$cache</span> <span class="sy0">=&amp;</span> <span class="re0">$event</span><span class="sy0">-&gt;</span><span class="me1">data</span><span class="sy0">;</span>
&nbsp;
      <span class="co1">// we're only interested in wiki pages and supported render modes</span>
      <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">(</span><span class="re0">$cache</span><span class="sy0">-&gt;</span><span class="me1">page</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">return</span><span class="sy0">;</span>
      <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">(</span><span class="re0">$cache</span><span class="sy0">-&gt;</span><span class="me1">mode</span><span class="br0">)</span> <span class="sy0">||</span> <span class="sy0">!</span><a href="http://www.php.net/in_array"><span class="kw3">in_array</span></a><span class="br0">(</span><span class="re0">$cache</span><span class="sy0">-&gt;</span><span class="me1">mode</span><span class="sy0">,</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="st_h">'i'</span><span class="sy0">,</span><span class="st_h">'metadata'</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">return</span><span class="sy0">;</span>
&nbsp;
      <span class="re0">$max_age</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span>_cache_maxage<span class="br0">(</span><span class="re0">$cache</span><span class="sy0">-&gt;</span><span class="me1">page</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
      <span class="kw1">if</span> <span class="br0">(</span><a href="http://www.php.net/is_null"><span class="kw3">is_null</span></a><span class="br0">(</span><span class="re0">$max_age</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">return</span><span class="sy0">;</span>
&nbsp;
      <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$max_age</span> <span class="sy0">&lt;=</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="co1">// expire the cache</span>
        <span class="co1">//no cache for twitter!</span>
        <span class="re0">$event</span><span class="sy0">-&gt;</span><span class="me1">preventDefault</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="re0">$event</span><span class="sy0">-&gt;</span><span class="me1">stopPropagation</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="re0">$event</span><span class="sy0">-&gt;</span><span class="me1">result</span> <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">;</span>
        <span class="kw1">return</span><span class="sy0">;</span>
      <span class="br0">}</span>
&nbsp;
      <span class="re0">$cache</span><span class="sy0">-&gt;</span><span class="me1">depends</span><span class="br0">[</span><span class="st_h">'age'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="sy0">!</span><a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">(</span><span class="re0">$cache</span><span class="sy0">-&gt;</span><span class="me1">depends</span><span class="br0">[</span><span class="st_h">'age'</span><span class="br0">]</span><span class="br0">)</span> ?  <a href="http://www.php.net/min"><span class="kw3">min</span></a><span class="br0">(</span><span class="re0">$cache</span><span class="sy0">-&gt;</span><span class="me1">depends</span><span class="br0">[</span><span class="st_h">'age'</span><span class="br0">]</span><span class="sy0">,</span><span class="re0">$max_age</span><span class="br0">)</span><span class="sy0">:</span> <span class="re0">$max_age</span><span class="sy0">;</span>
&nbsp;
    <span class="br0">}</span>
&nbsp;
    <span class="co4">/**
     * determine the max allowable age of the cache
     *
     * @param   string    $id         wiki page name
     *
     * @return  int                   max allowable age of the cache
     *                                null means not applicable
     */</span>
    <span class="kw2">function</span> _cache_maxage<span class="br0">(</span><span class="re0">$id</span><span class="br0">)</span> <span class="br0">{</span>
&nbsp;
      <span class="re0">$hasPart</span> <span class="sy0">=</span> p_get_metadata<span class="br0">(</span><span class="re0">$id</span><span class="sy0">,</span> <span class="st_h">'relation haspart'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
      <span class="kw1">if</span> <span class="br0">(</span><a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">(</span><span class="re0">$hasPart</span><span class="br0">)</span> <span class="sy0">||</span> <span class="sy0">!</span><a href="http://www.php.net/is_array"><span class="kw3">is_array</span></a><span class="br0">(</span><span class="re0">$hasPart</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">return</span> <span class="kw4">null</span><span class="sy0">;</span>
&nbsp;
      <span class="re0">$age</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
      <span class="kw1">foreach</span> <span class="br0">(</span><span class="re0">$hasPart</span> <span class="kw1">as</span> <span class="re0">$file</span> <span class="sy0">=&gt;</span> <span class="re0">$data</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$file</span> <span class="sy0">==</span> <span class="st0">"_plugin_twitter"</span><span class="br0">)</span>
        <span class="br0">{</span>
            <span class="co1">//this is us, outdate the cache if older than the configured seconds</span>
            <span class="kw1">return</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">getConf</span><span class="br0">(</span><span class="st_h">'timeout'</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="br0">}</span>
      <span class="br0">}</span>
&nbsp;
      <span class="kw1">return</span> <span class="re0">$age</span> ? <a href="http://www.php.net/time"><span class="kw3">time</span></a><span class="br0">(</span><span class="br0">)</span><span class="sy0">-</span><span class="re0">$age</span> <span class="sy0">:</span> <span class="kw4">null</span><span class="sy0">;</span>
    <span class="br0">}</span>
&nbsp;
<span class="br0">}</span></pre>
</dd></dl>
<dl class="code">
<dt><a href="https://www.dokuwiki.org/_export/code/plugin:twitter?codeblock=4" title="Download Snippet" class="mediafile mf_php">syntax.php</a></dt>
<dd><pre class="code php"><span class="kw2">&lt;?php</span>
<span class="co4">/**
 * Twitter Plugin
 *
 * @license    GPL 2 (http://www.gnu.org/licenses/gpl.html)
 * @author     Christoph Lang &lt;calbity@gmx.de&gt;
 */</span>
&nbsp;
<span class="co1">// based on http://wiki.splitbrain.org/plugin:tutorial</span>
&nbsp;
<span class="co1">// must be run within DokuWiki</span>
<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><a href="http://www.php.net/defined"><span class="kw3">defined</span></a><span class="br0">(</span><span class="st_h">'DOKU_INC'</span><span class="br0">)</span><span class="br0">)</span> <a href="http://www.php.net/die"><span class="kw3">die</span></a><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><a href="http://www.php.net/defined"><span class="kw3">defined</span></a><span class="br0">(</span><span class="st_h">'DOKU_PLUGIN'</span><span class="br0">)</span><span class="br0">)</span> <a href="http://www.php.net/define"><span class="kw3">define</span></a><span class="br0">(</span><span class="st_h">'DOKU_PLUGIN'</span><span class="sy0">,</span> DOKU_INC <span class="sy0">.</span> <span class="st_h">'lib/plugins/'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="kw1">require_once</span><span class="br0">(</span>DOKU_PLUGIN <span class="sy0">.</span> <span class="st_h">'syntax.php'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="co4">/**
 * All DokuWiki plugins to extend the parser/rendering mechanism
 * need to inherit from this class
 */</span>
<span class="kw2">class</span> syntax_plugin_twitter <span class="kw2">extends</span> DokuWiki_Syntax_Plugin <span class="br0">{</span>
    <span class="kw2">function</span> getInfo<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw1">return</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span>
        <span class="st_h">'author'</span>  <span class="sy0">=&gt;</span> <span class="st_h">'Christoph Lang'</span><span class="sy0">,</span>
        <span class="st_h">'email'</span>   <span class="sy0">=&gt;</span> <span class="st_h">'calbity@gmx.de'</span><span class="sy0">,</span>
        <span class="st_h">'date'</span>    <span class="sy0">=&gt;</span> <span class="st_h">'2008-07-05'</span><span class="sy0">,</span>
        <span class="st_h">'name'</span>    <span class="sy0">=&gt;</span> <span class="st_h">'Twitter Plugin'</span><span class="sy0">,</span>
        <span class="st_h">'desc'</span>    <span class="sy0">=&gt;</span> <span class="st_h">'Show Tweets from Twitter'</span><span class="sy0">,</span>
        <span class="st_h">'url'</span>     <span class="sy0">=&gt;</span> <span class="st_h">'http://www.google.de'</span>
        <span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
&nbsp;
    <span class="kw2">private</span> <span class="kw2">function</span> replace<span class="br0">(</span><span class="re0">$data</span><span class="br0">)</span> <span class="br0">{</span>
&nbsp;
&nbsp;
    		<span class="re0">$sResponse</span> <span class="sy0">=</span> <span class="st0">"&lt;h1&gt;"</span><span class="sy0">.</span><span class="re0">$data</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">"&lt;/h1&gt;"</span><span class="sy0">;</span>
    		<span class="re0">$data</span> <span class="sy0">=</span> <span class="re0">$data</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span>
&nbsp;
    		<span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">(</span><span class="re0">$data</span><span class="br0">)</span><span class="br0">)</span><span class="br0">{</span>
    			<span class="kw1">return</span> <span class="re0">$sResponse</span><span class="sy0">.</span><span class="st0">"&lt;h4&gt;Twitter is down....&lt;/h4&gt;"</span><span class="sy0">;</span>
    		<span class="br0">}</span>
    		<span class="re0">$sResponse</span> <span class="sy0">.=</span> <span class="st_h">'&lt;table class="twitterentries" style="width:100%;"&gt;'</span><span class="sy0">;</span>
&nbsp;
&nbsp;
    		<span class="kw1">foreach</span><span class="br0">(</span><span class="re0">$data</span> <span class="kw1">as</span> <span class="re0">$entry</span><span class="br0">)</span><span class="br0">{</span>
&nbsp;
    			<span class="re0">$text</span><span class="sy0">=</span><span class="re0">$entry</span><span class="sy0">-&gt;</span><span class="me1">text</span><span class="sy0">.</span><span class="st0">" "</span><span class="sy0">;</span>
    			<span class="re0">$image</span><span class="sy0">=</span><span class="re0">$entry</span><span class="sy0">-&gt;</span><span class="me1">user</span><span class="sy0">-&gt;</span><span class="me1">profile_image_url</span><span class="sy0">;</span>
    			<span class="re0">$time</span><span class="sy0">=</span><span class="re0">$entry</span><span class="sy0">-&gt;</span><span class="me1">created_at</span><span class="sy0">;</span>    			
    			<span class="re0">$time</span> <span class="sy0">=</span> <a href="http://www.php.net/strtotime"><span class="kw3">strtotime</span></a><span class="br0">(</span><span class="re0">$time</span><span class="br0">)</span><span class="sy0">;</span>
    			<span class="co1">//$time = date("Y-m-d H:i:s",$time);</span>
    			<span class="re0">$time</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">Timesince</span><span class="br0">(</span><span class="re0">$time</span><span class="br0">)</span><span class="sy0">;</span>
    			<span class="re0">$from</span><span class="sy0">=</span><span class="re0">$entry</span><span class="sy0">-&gt;</span><span class="me1">from_user</span><span class="sy0">;</span>
    			<span class="re0">$name</span> <span class="sy0">=</span> <span class="st0">""</span><span class="sy0">;</span>
    			<span class="kw1">if</span><span class="br0">(</span><span class="sy0">!</span><a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">(</span><span class="re0">$entry</span><span class="sy0">-&gt;</span><span class="me1">user</span><span class="sy0">-&gt;</span><span class="me1">name</span><span class="br0">)</span><span class="br0">)</span>
	    			<span class="re0">$name</span> <span class="sy0">=</span> <span class="st0">" ("</span><span class="sy0">.</span><span class="re0">$entry</span><span class="sy0">-&gt;</span><span class="me1">user</span><span class="sy0">-&gt;</span><span class="me1">name</span><span class="sy0">.</span><span class="st0">")"</span><span class="sy0">;</span>
&nbsp;
    			<span class="kw1">if</span><span class="br0">(</span><a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">(</span><span class="re0">$from</span><span class="br0">)</span><span class="br0">)</span>
    				<span class="re0">$from</span><span class="sy0">=</span><span class="re0">$entry</span><span class="sy0">-&gt;</span><span class="me1">user</span><span class="sy0">-&gt;</span><span class="me1">screen_name</span><span class="sy0">;</span>
&nbsp;
    			<span class="kw1">if</span><span class="br0">(</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">(</span><span class="re0">$entry</span><span class="sy0">-&gt;</span><span class="me1">profile_image_url</span><span class="br0">)</span><span class="br0">)</span>
    			<span class="br0">{</span>
    			 <span class="re0">$image</span><span class="sy0">=</span><span class="re0">$entry</span><span class="sy0">-&gt;</span><span class="me1">profile_image_url</span><span class="sy0">;</span>
    			<span class="br0">}</span>
&nbsp;
    			<span class="co1">// get links</span>
          <span class="re0">$search</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span>
            <span class="st_h">'`((?:https?|ftp)://\S+[[:alnum:]]/?)`si'</span><span class="sy0">,</span>
            <span class="st_h">'`((?&lt;!//)(www\.\S+[[:alnum:]]/?))`si'</span>
          <span class="br0">)</span><span class="sy0">;</span>
          <span class="re0">$replace</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span>
            <span class="st_h">'&lt;a href="$1"  target="_blank"&gt;$1&lt;/a&gt; '</span><span class="sy0">,</span>
            <span class="st_h">'&lt;a href="http://$1" target="_blank"&gt;$1&lt;/a&gt;'</span>
          <span class="br0">)</span><span class="sy0">;</span>
          <span class="re0">$text</span> <span class="sy0">=</span> <a href="http://www.php.net/preg_replace"><span class="kw3">preg_replace</span></a><span class="br0">(</span><span class="re0">$search</span><span class="sy0">,</span> <span class="re0">$replace</span><span class="sy0">,</span> <span class="re0">$text</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    			<span class="co1">// get hashtags</span>
    			<span class="kw1">if</span> <span class="br0">(</span><a href="http://www.php.net/preg_match_all"><span class="kw3">preg_match_all</span></a><span class="br0">(</span><span class="st_h">'/#(.*?)\s/'</span><span class="sy0">,</span> <span class="re0">$text</span><span class="sy0">,</span> <span class="re0">$arMatches</span><span class="br0">)</span><span class="br0">)</span>
    			<span class="br0">{</span>
    				<span class="kw1">for</span><span class="br0">(</span><span class="re0">$i</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">(</span><span class="re0">$arMatches</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span>
    			   		<span class="re0">$text</span> <span class="sy0">=</span> <a href="http://www.php.net/str_replace"><span class="kw3">str_replace</span></a><span class="br0">(</span><span class="re0">$arMatches</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">[</span><span class="re0">$i</span><span class="br0">]</span><span class="sy0">,</span> <span class="st_h">'&lt;a target="_blank" href="http://search.twitter.com/search?q='</span> <span class="sy0">.</span> <span class="re0">$arMatches</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">[</span><span class="re0">$i</span><span class="br0">]</span> <span class="sy0">.</span> <span class="st_h">'"&gt;'</span> <span class="sy0">.</span> <span class="re0">$arMatches</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">[</span><span class="re0">$i</span><span class="br0">]</span> <span class="sy0">.</span> <span class="st0">"&lt;/a&gt;"</span><span class="sy0">,</span> <span class="re0">$text</span><span class="br0">)</span><span class="sy0">;</span>
          <span class="br0">}</span>
&nbsp;
    			<span class="co1">// get twitterer</span>
    			<span class="kw1">if</span> <span class="br0">(</span><a href="http://www.php.net/preg_match_all"><span class="kw3">preg_match_all</span></a><span class="br0">(</span><span class="st_h">'/@(.*?)\s/'</span><span class="sy0">,</span> <span class="re0">$text</span><span class="sy0">,</span> <span class="re0">$arMatches</span><span class="br0">)</span><span class="br0">)</span>
    			<span class="br0">{</span>
    				<span class="kw1">for</span><span class="br0">(</span><span class="re0">$i</span><span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">(</span><span class="re0">$arMatches</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span><span class="br0">{</span>
    			   <span class="re0">$strTwitterer</span> <span class="sy0">=</span> <a href="http://www.php.net/preg_replace"><span class="kw3">preg_replace</span></a><span class="br0">(</span><span class="st_h">'/\W/'</span><span class="sy0">,</span> <span class="st_h">''</span><span class="sy0">,</span> <span class="re0">$arMatches</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">[</span><span class="re0">$i</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span>
    			   <span class="re0">$text</span> <span class="sy0">=</span> <a href="http://www.php.net/str_replace"><span class="kw3">str_replace</span></a><span class="br0">(</span><span class="re0">$strTwitterer</span><span class="sy0">,</span> <span class="st_h">'&lt;a target="_blank" href="http://twitter.com/'</span> <span class="sy0">.</span> <span class="re0">$strTwitterer</span> <span class="sy0">.</span> <span class="st_h">'"&gt;'</span> <span class="sy0">.</span> <span class="re0">$strTwitterer</span> <span class="sy0">.</span> <span class="st0">"&lt;/a&gt;"</span><span class="sy0">,</span> <span class="re0">$text</span><span class="br0">)</span><span class="sy0">;</span>
    			  <span class="br0">}</span>
          <span class="br0">}</span>
&nbsp;
    			<span class="re0">$sResponse</span> <span class="sy0">.=</span> <span class="st_h">'&lt;tr onmouseover="this.style.backgroundColor=\'#cccccc\';" onmouseout="this.style.backgroundColor=\'\';" style="width:100%;"&gt;&lt;td style="width:48px;"&gt;&lt;img width="48" src="'</span><span class="sy0">.</span><span class="re0">$image</span><span class="sy0">.</span><span class="st_h">'" alt="'</span><span class="sy0">.</span><span class="re0">$from</span><span class="sy0">.</span><span class="st_h">'"/&gt;&lt;/td&gt;&lt;td&gt;'</span><span class="sy0">.</span><span class="re0">$text</span><span class="sy0">.</span><span class="st_h">'&lt;br/&gt;About '</span><span class="sy0">.</span><span class="re0">$time</span><span class="sy0">.</span><span class="st_h">' ago from &lt;a target="_blank" href="http://twitter.com/'</span><span class="sy0">.</span><span class="re0">$from</span><span class="sy0">.</span><span class="st_h">'"&gt;'</span><span class="sy0">.</span><span class="re0">$from</span><span class="sy0">.</span> <span class="re0">$name</span><span class="sy0">.</span><span class="st_h">'&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;'</span><span class="sy0">;</span>
    		<span class="br0">}</span>
    		<span class="re0">$sResponse</span> <span class="sy0">.=</span> <span class="st0">"&lt;/table&gt;"</span><span class="sy0">;</span>
&nbsp;
&nbsp;
        <span class="kw1">return</span> <span class="re0">$sResponse</span><span class="sy0">;</span>
    <span class="br0">}</span>
    <span class="coMULTI">/* Works out the time since the entry post, takes a an argument in unix time (seconds)  
		*/</span>  
		<span class="kw2">public</span> <span class="kw2">function</span> Timesince<span class="br0">(</span><span class="re0">$original</span><span class="br0">)</span> <span class="br0">{</span>   
		    <span class="co1">// array of time period chunks   </span>
		    <span class="re0">$chunks</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span>   
		    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="nu0">60</span> <span class="sy0">*</span> <span class="nu0">60</span> <span class="sy0">*</span> <span class="nu0">24</span> <span class="sy0">*</span> <span class="nu0">365</span> <span class="sy0">,</span> <span class="st_h">'year'</span><span class="br0">)</span><span class="sy0">,</span>   
		    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="nu0">60</span> <span class="sy0">*</span> <span class="nu0">60</span> <span class="sy0">*</span> <span class="nu0">24</span> <span class="sy0">*</span> <span class="nu0">30</span> <span class="sy0">,</span> <span class="st_h">'month'</span><span class="br0">)</span><span class="sy0">,</span>   
		    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="nu0">60</span> <span class="sy0">*</span> <span class="nu0">60</span> <span class="sy0">*</span> <span class="nu0">24</span> <span class="sy0">*</span> <span class="nu0">7</span><span class="sy0">,</span> <span class="st_h">'week'</span><span class="br0">)</span><span class="sy0">,</span>   
		    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="nu0">60</span> <span class="sy0">*</span> <span class="nu0">60</span> <span class="sy0">*</span> <span class="nu0">24</span> <span class="sy0">,</span> <span class="st_h">'day'</span><span class="br0">)</span><span class="sy0">,</span>   
		    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="nu0">60</span> <span class="sy0">*</span> <span class="nu0">60</span> <span class="sy0">,</span> <span class="st_h">'hour'</span><span class="br0">)</span><span class="sy0">,</span>   
		    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="nu0">60</span> <span class="sy0">,</span> <span class="st_h">'min'</span><span class="br0">)</span><span class="sy0">,</span>   
		    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="nu0">1</span> <span class="sy0">,</span> <span class="st_h">'sec'</span><span class="br0">)</span><span class="sy0">,</span>   
		    <span class="br0">)</span><span class="sy0">;</span>   
&nbsp;
		    <span class="re0">$today</span> <span class="sy0">=</span> <a href="http://www.php.net/time"><span class="kw3">time</span></a><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="coMULTI">/* Current unix time  */</span>  
		    <span class="re0">$since</span> <span class="sy0">=</span> <span class="re0">$today</span> <span class="sy0">-</span> <span class="re0">$original</span><span class="sy0">;</span>   
&nbsp;
		    <span class="co1">// $j saves performing the count function each time around the loop   </span>
		    <span class="kw1">for</span> <span class="br0">(</span><span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="re0">$j</span> <span class="sy0">=</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">(</span><span class="re0">$chunks</span><span class="br0">)</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="re0">$j</span><span class="sy0">;</span> <span class="re0">$i</span><span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span>   
&nbsp;
		    <span class="re0">$seconds</span> <span class="sy0">=</span> <span class="re0">$chunks</span><span class="br0">[</span><span class="re0">$i</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span>   
		    <span class="re0">$name</span> <span class="sy0">=</span> <span class="re0">$chunks</span><span class="br0">[</span><span class="re0">$i</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span>   
&nbsp;
		    <span class="co1">// finding the biggest chunk (if the chunk fits, break)   </span>
		    <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="re0">$count</span> <span class="sy0">=</span> <a href="http://www.php.net/floor"><span class="kw3">floor</span></a><span class="br0">(</span><span class="re0">$since</span> <span class="sy0">/</span> <span class="re0">$seconds</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>   
		        <span class="kw1">break</span><span class="sy0">;</span>   
		    <span class="br0">}</span>   
		    <span class="br0">}</span>   
&nbsp;
		    <span class="re0">$print</span> <span class="sy0">=</span> <span class="br0">(</span><span class="re0">$count</span> <span class="sy0">==</span> <span class="nu0">1</span><span class="br0">)</span> ? <span class="st_h">'1 '</span><span class="sy0">.</span><span class="re0">$name</span> <span class="sy0">:</span> <span class="st0">"<span class="es4">$count</span> <span class="es4">{$name}</span>s"</span><span class="sy0">;</span>   
&nbsp;
		    <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$i</span> <span class="sy0">+</span> <span class="nu0">1</span> <span class="sy0">&lt;</span> <span class="re0">$j</span><span class="br0">)</span> <span class="br0">{</span>   
		    <span class="co1">// now getting the second item   </span>
		    <span class="re0">$seconds2</span> <span class="sy0">=</span> <span class="re0">$chunks</span><span class="br0">[</span><span class="re0">$i</span> <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span>   
		    <span class="re0">$name2</span> <span class="sy0">=</span> <span class="re0">$chunks</span><span class="br0">[</span><span class="re0">$i</span> <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span>   
&nbsp;
		    <span class="co1">// add second item if its greater than 0   </span>
		    <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="re0">$count2</span> <span class="sy0">=</span> <a href="http://www.php.net/floor"><span class="kw3">floor</span></a><span class="br0">(</span><span class="br0">(</span><span class="re0">$since</span> <span class="sy0">-</span> <span class="br0">(</span><span class="re0">$seconds</span> <span class="sy0">*</span> <span class="re0">$count</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">/</span> <span class="re0">$seconds2</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>   
		        <span class="re0">$print</span> <span class="sy0">.=</span> <span class="br0">(</span><span class="re0">$count2</span> <span class="sy0">==</span> <span class="nu0">1</span><span class="br0">)</span> ? <span class="st_h">', 1 '</span><span class="sy0">.</span><span class="re0">$name2</span> <span class="sy0">:</span> <span class="st0">", <span class="es4">$count2</span> <span class="es4">{$name2}</span>s"</span><span class="sy0">;</span>   
		    <span class="br0">}</span>   
		    <span class="br0">}</span>   
		    <span class="kw1">return</span> <span class="re0">$print</span><span class="sy0">;</span>   
		<span class="br0">}</span>  
&nbsp;
&nbsp;
    <span class="kw2">function</span> connectTo<span class="br0">(</span><span class="re0">$mode</span><span class="br0">)</span> <span class="br0">{</span>	
				<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">Lexer</span><span class="sy0">-&gt;</span><span class="me1">addSpecialPattern</span><span class="br0">(</span><span class="st_h">'\[TWITTER\:USER\:.*?\]'</span><span class="sy0">,</span> <span class="re0">$mode</span><span class="sy0">,</span> <span class="st_h">'plugin_twitter'</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">Lexer</span><span class="sy0">-&gt;</span><span class="me1">addSpecialPattern</span><span class="br0">(</span><span class="st_h">'\[TWITTER\:SEARCH\:.*?\]'</span><span class="sy0">,</span> <span class="re0">$mode</span><span class="sy0">,</span> <span class="st_h">'plugin_twitter'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
				<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">Lexer</span><span class="sy0">-&gt;</span><span class="me1">addSpecialPattern</span><span class="br0">(</span><span class="st_h">'{{twitter&gt;user\:.*?}}'</span><span class="sy0">,</span> <span class="re0">$mode</span><span class="sy0">,</span> <span class="st_h">'plugin_twitter'</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">Lexer</span><span class="sy0">-&gt;</span><span class="me1">addSpecialPattern</span><span class="br0">(</span><span class="st_h">'{{twitter&gt;search\:.*?}}'</span><span class="sy0">,</span> <span class="re0">$mode</span><span class="sy0">,</span> <span class="st_h">'plugin_twitter'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    <span class="br0">}</span>
&nbsp;
    <span class="kw2">function</span> <a href="http://www.php.net/gettype"><span class="kw3">getType</span></a><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> <span class="st_h">'substition'</span><span class="sy0">;</span> <span class="br0">}</span>
&nbsp;
    <span class="kw2">function</span> getSort<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> <span class="nu0">314</span><span class="sy0">;</span> <span class="br0">}</span>
&nbsp;
    <span class="kw2">function</span> handle<span class="br0">(</span><span class="re0">$match</span><span class="sy0">,</span> <span class="re0">$state</span><span class="sy0">,</span> <span class="re0">$pos</span><span class="sy0">,</span> <span class="sy0">&amp;</span><span class="re0">$handler</span><span class="br0">)</span> <span class="br0">{</span>
&nbsp;
    		<span class="re0">$match</span> <span class="sy0">=</span> <a href="http://www.php.net/str_replace"><span class="kw3">str_replace</span></a><span class="br0">(</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="st0">"&gt;"</span><span class="sy0">,</span><span class="st0">"{{"</span><span class="sy0">,</span><span class="st0">"}}"</span><span class="br0">)</span><span class="sy0">,</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="st0">":"</span><span class="sy0">,</span><span class="st0">"["</span><span class="sy0">,</span><span class="st0">"]"</span><span class="br0">)</span><span class="sy0">,</span><span class="re0">$match</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    		<span class="re0">$match</span> <span class="sy0">=</span> <a href="http://www.php.net/substr"><span class="kw3">substr</span></a><span class="br0">(</span><span class="re0">$match</span><span class="sy0">,</span><span class="nu0">1</span><span class="sy0">,-</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span>
    		<span class="re0">$data</span> <span class="sy0">=</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">(</span><span class="st0">":"</span><span class="sy0">,</span><span class="re0">$match</span><span class="br0">)</span><span class="sy0">;</span>    	
&nbsp;
    		<span class="re0">$number</span> <span class="sy0">=</span><span class="st0">""</span><span class="sy0">;</span>    		
&nbsp;
 				<span class="re0">$data</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span> <span class="sy0">=</span> <a href="http://www.php.net/str_replace"><span class="kw3">str_replace</span></a><span class="br0">(</span><span class="st0">" "</span><span class="sy0">,</span><span class="st0">"%20"</span><span class="sy0">,</span><span class="re0">$data</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span>
    		<span class="kw1">if</span><span class="br0">(</span><a href="http://www.php.net/strtoupper"><span class="kw3">strtoupper</span></a><span class="br0">(</span><span class="re0">$data</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">==</span> <span class="st0">"SEARCH"</span><span class="br0">)</span><span class="br0">{</span>
&nbsp;
    			<span class="sy0">@</span><span class="re0">$json</span> <span class="sy0">=</span> <a href="http://www.php.net/file_get_contents"><span class="kw3">file_get_contents</span></a><span class="br0">(</span><span class="st0">"http://search.twitter.com/search.json?q="</span><span class="sy0">.</span><span class="re0">$data</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">.</span><span class="re0">$number</span><span class="br0">)</span><span class="sy0">;</span>
    		<span class="br0">}</span><span class="kw1">else</span><span class="br0">{</span>
&nbsp;
    			<span class="kw1">if</span><span class="br0">(</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">(</span><span class="re0">$data</span><span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span>
    				<span class="re0">$number</span> <span class="sy0">=</span> <span class="st0">"?count="</span><span class="sy0">.</span><span class="re0">$data</span><span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span><span class="sy0">;</span>
&nbsp;
    			<span class="sy0">@</span><span class="re0">$json</span> <span class="sy0">=</span> <a href="http://www.php.net/file_get_contents"><span class="kw3">file_get_contents</span></a><span class="br0">(</span><span class="st0">"http://twitter.com/statuses/user_timeline/"</span><span class="sy0">.</span><span class="re0">$data</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">.</span><span class="st0">".json"</span><span class="sy0">.</span><span class="re0">$number</span><span class="br0">)</span><span class="sy0">;</span>		
&nbsp;
				<span class="br0">}</span>
&nbsp;
				<span class="re0">$decode</span> <span class="sy0">=</span> <a href="http://www.php.net/json_decode"><span class="kw3">json_decode</span></a> <span class="br0">(</span> <span class="re0">$json</span> <span class="br0">)</span><span class="sy0">;</span>
&nbsp;
				<span class="kw1">if</span><span class="br0">(</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">(</span><span class="re0">$decode</span><span class="sy0">-&gt;</span><span class="me1">results</span><span class="br0">)</span><span class="br0">)</span>
				<span class="br0">{</span>
				  <span class="kw1">return</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="re0">$decode</span><span class="sy0">-&gt;</span><span class="me1">results</span><span class="sy0">,</span><span class="st0">"Results for search: "</span><span class="sy0">.</span><a href="http://www.php.net/str_replace"><span class="kw3">str_replace</span></a><span class="br0">(</span><span class="st0">"%20"</span><span class="sy0">,</span><span class="st0">" and "</span><span class="sy0">,</span><span class="re0">$data</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
				<span class="br0">}</span>
&nbsp;
        <span class="kw1">return</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="re0">$decode</span><span class="sy0">,</span><span class="st0">"Timeline from "</span><span class="sy0">.</span><span class="re0">$data</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
&nbsp;
    <span class="kw2">function</span> render<span class="br0">(</span><span class="re0">$mode</span><span class="sy0">,</span> <span class="sy0">&amp;</span><span class="re0">$renderer</span><span class="sy0">,</span> <span class="re0">$data</span><span class="br0">)</span> <span class="br0">{</span>
&nbsp;
        <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$mode</span> <span class="sy0">==</span> <span class="st_h">'xhtml'</span><span class="br0">)</span> <span class="br0">{</span>
            <span class="co1">// prevent caching to ensure content is always fresh</span>
            <span class="re0">$renderer</span><span class="sy0">-&gt;</span><span class="me1">info</span><span class="br0">[</span><span class="st_h">'cache'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">;</span>
&nbsp;
            <span class="re0">$renderer</span><span class="sy0">-&gt;</span><span class="me1">doc</span> <span class="sy0">.=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">replace</span><span class="br0">(</span><span class="re0">$data</span><span class="br0">)</span><span class="sy0">;</span>
            <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span>
        <span class="br0">}</span> <span class="kw1">elseif</span> <span class="br0">(</span><span class="re0">$mode</span> <span class="sy0">==</span> <span class="st_h">'metadata'</span><span class="br0">)</span><span class="br0">{</span>
            <span class="co1">// for metadata renderer</span>
            <span class="re0">$renderer</span><span class="sy0">-&gt;</span><span class="me1">meta</span><span class="br0">[</span><span class="st_h">'relation'</span><span class="br0">]</span><span class="br0">[</span><span class="st_h">'haspart'</span><span class="br0">]</span><span class="br0">[</span><span class="st_h">'_plugin_twitter'</span><span class="br0">]</span> <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">;</span>
            <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span>
        <span class="br0">}</span>
&nbsp;
        <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre>
</dd></dl>

</div>
<div class="secedit editbutton_section editbutton_5"><form class="button btn_secedit" method="post" action="./plugin twitter [DokuWiki]_files/plugin twitter [DokuWiki].htm"><div class="no"><input type="hidden" name="do" value="edit"><input type="hidden" name="rev" value="1358164633"><input type="hidden" name="summary" value="[Installation] "><input type="hidden" name="target" value="section"><input type="hidden" name="range" value="1966-11819"><input type="submit" value="Edit" class="button" title="Installation"></div><input type="hidden" name="bb2_screener_" value="1360177118 115.248.50.23"></form></div>
<h2 class="sectionedit6" id="discussion">Discussion</h2>
<div class="level2">

<p>
<strong>I would like to send dokuwiki changes (the changelog) to twitter automatically.  How can I do that? </strong>
<em><a href="mailto:citizenkeys%20%5Bat%5D%20yahoo%20%5Bdot%5D%20com" class="mail" title="citizenkeys [at] yahoo [dot] com">citizenkeys</a> 2010/04/17 19:29</em>
</p>
<blockquote><div class="no">
 That is not possible with this plugin. You would need another plugin to do automatic tweeting of the changelog. The plugin needs to be a action plugin and not a syntax plugin. Currently i'm not havin any plans to realize that, althought it would be really easy because Twitter has a really good <abbr title="Application Programming Interface">API</abbr>. <em><a href="mailto:calbity%20%5Bat%5D%20gmx%20%5Bdot%5D%20de" class="mail" title="calbity [at] gmx [dot] de">Christoph Lang</a></em><blockquote><div class="no">
<em>As they say 'better late than never'. I created a new plugin called <a href="https://www.dokuwiki.org/plugin:autotweet" class="wikilink1" title="plugin:autotweet">autotweet</a> that automatically posts Tweets with page changes of specific pages to Twitter using the <a href="http://oauth.net/" class="urlextern" title="http://oauth.net">oAuth authentication protocoll</a>. You can specify the look and feel of the Tweet to suit your needs and also specify which pages should be regarded. I hope this is what you had in mind, maybe it's still usefull to somebody. <a href="mailto:info%20%5Bat%5D%20drost%20%5Bdash%5D%20tenfelde%20%5Bdot%5D%20de" class="mail" title="info [at] drost [dash] tenfelde [dot] de">jdt</a> 2011/10/06 11:10</em></div></blockquote>
</div></blockquote>

<p>
<strong>Can you (or anybody!) please write a plugin to send dokuwiki updates to twitter?  Right now, my site has a plugin to automatically send sitemap updates to Google.  We would like to send page updates automatically to twitter. </strong>
<em><a href="mailto:citizenkeys%20%5Bat%5D%20yahoo%20%5Bdot%5D%20com" class="mail" title="citizenkeys [at] yahoo [dot] com">citizenkeys</a> 2010/04/17 19:29</em>
</p>
<blockquote><div class="no">
 I wouldn't even know what to tweet on a page update, because 140 chars not much. Personally i think a rss feed is the much better choice here. But maybe someone will do your plugin  <em><a href="mailto:calbity%20%5Bat%5D%20gmx%20%5Bdot%5D%20de" class="mail" title="calbity [at] gmx [dot] de">Christoph Lang</a></em></div></blockquote>
<blockquote><div class="no">
<blockquote><div class="no">
 <a href="https://www.dokuwiki.org/plugin:autotweet" class="wikilink1" title="plugin:autotweet">Try out this plugin.</a> <em><a href="http://desbest.uk.to/" class="urlextern" title="http://desbest.uk.to">desbest</a> 2012 July</em></div></blockquote>
</div></blockquote>

<p>
Nice plugin! But is it possible to make the syntax more *DokuWiki-like*? Such as using <code><a href="https://www.dokuwiki.org/_media/twitter_user:reder" class="media mediafile mf_ wikilink2" title="twitter_user:reder">reder</a></code>?  —
<em><a href="mailto:reder%20%5Bdot%5D%20tseng%20%5Bat%5D%20gmail%20%5Bdot%5D%20com" class="mail" title="reder [dot] tseng [at] gmail [dot] com">Reder</a> 2009/07/04 08:30</em>
</p>
<blockquote><div class="no">
Ok, just updated the code. Now you can also use:</div></blockquote>
<pre class="code">//Timeline of user
{{twitter&gt;user:reder}}
//Search for Keyword 'PHP'
{{twitter&gt;search:PHP}}</pre>

<p>
Hope that helps.
</p>
<hr>

<p>
I build some regex into the Plugin to make links, twitterer and hashtags clickable.
<em><a href="mailto:rifter%20%5Bat%5D%20rifter%20%5Bdot%5D%20org" class="mail" title="rifter [at] rifter [dot] org">rifter</a> 2009/07/08 17:56</em>
</p>
<blockquote><div class="no">
 Thank you, seems to work very fine! </div></blockquote>

<p>
<em><a href="mailto:calbity%20%5Bat%5D%20gmx%20%5Bdot%5D%20de" class="mail" title="calbity [at] gmx [dot] de">Christoph Lang</a> 2009/07/08 23:46</em>
</p>

<p>
Updated the code a little bit, mainly the time of the tweet is now displayed Twitter-like, e.g. 5 minutes ago, or About 1 week ago.
Also there was a problem with the regex (only first hastag was clickable). Now all hastags are clickable.
<em><a href="mailto:calbity%20%5Bat%5D%20gmx%20%5Bdot%5D%20de" class="mail" title="calbity [at] gmx [dot] de">Christoph Lang</a> 2009/07/09 23:01</em>
</p>
<blockquote><div class="no">
Getting a “Twitter is down” error when it isn't. — Grimp</div></blockquote>
<blockquote><div class="no">
<blockquote><div class="no">
 “Twitter is down” means either Twitter is down, or the response from Twitter is invalid. Maybe you used a wrong syntax?<br>
Give me a sample of your syntax, and I will look. Maybe it's a Bug. — C.Lang</div></blockquote>
</div></blockquote>
<blockquote><div class="no">
<blockquote><div class="no">
<blockquote><div class="no">
 I have the same problem “Twitter is down” … example on <a href="http://pichat-wiki.de/links#twitter" class="urlextern" title="http://pichat-wiki.de/links#twitter">http://pichat-wiki.de/links#twitter</a> — Mark Wolfgruber</div></blockquote>
</div></blockquote>
</div></blockquote>
<blockquote><div class="no">
<blockquote><div class="no">
 In you <abbr title="Hypertext Preprocessor">PHP</abbr>.ini the option allow_url_fopen is Off. You have to turn it On, so that the Plugin can fetch the data from Twitter.<br>
 If Option is Off <a href="http://www.php.net/file_get_contents" class="interwiki iw_phpfn" title="http://www.php.net/file_get_contents">file_get_contents</a> can only open local files, and not files on another server. — C.Lang</div></blockquote>
</div></blockquote>
<blockquote><div class="no">
<blockquote><div class="no">
<blockquote><div class="no">
 I can't change the parameter for <code>allow_url_fopen</code> to On<br>
 but now it is working with the following additional function code <br>
 to install put the <code>private function file_get_contents</code> e.g. top of the <code>function handle</code> <br>
 replace in the function handles: file_get_contents with $this→file_get_contents<br>
 — <em><a href="http://600infos.de/" class="urlextern" title="http://600infos.de">Mark Wolfgruber</a>  2009/11/23 02:42</em></div></blockquote>
</div></blockquote>
</div></blockquote>

<p>
I updated the mod, now you can use allow_url_fopen with ON or OFF (I need for local Installation ON and for the Server OFF)
— <em><a href="http://600infos.de/" class="urlextern" title="http://600infos.de">Mark Wolfgruber</a>  2010/04/23 00:16</em>
</p>
<pre class="code php">    <span class="kw2">private</span> <span class="kw2">function</span> <a href="http://www.php.net/file_get_contents"><span class="kw3">file_get_contents</span></a><span class="br0">(</span><span class="re0">$url</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="co4">/** 
     *  Mod from Mark Wolfgruber (http://www.600infos.de) for http://www.pichat-wiki.de  
     *             
     *  this function is needed if you have in the PHP Core allow_url_fopen Off 
     *  replace in the function handle: file_get_contents with $this-&gt;file_get_contents
     *  
     * thx to Christoph Lang and http://www.php.net/manual/en/function.curl-exec.php
     **/</span>
     <span class="sy0">@</span><span class="re0">$json</span><span class="sy0">=</span><a href="http://www.php.net/file_get_contents"><span class="kw3">file_get_contents</span></a><span class="br0">(</span><span class="re0">$url</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="co1">// handle error if fopen is Off</span>
      <span class="kw1">if</span> <span class="br0">(</span><a href="http://www.php.net/is_bool"><span class="kw3">is_bool</span></a><span class="br0">(</span><span class="re0">$json</span><span class="br0">)</span> <span class="sy0">&amp;&amp;</span> <span class="re0">$json</span> <span class="sy0">==</span> <span class="kw4">false</span><span class="br0">)</span>
      <span class="br0">{</span>
        <span class="re0">$curl</span> <span class="sy0">=</span> <span class="sy0">@</span><a href="http://www.php.net/curl_init"><span class="kw3">curl_init</span></a><span class="br0">(</span><span class="re0">$url</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="sy0">@</span><a href="http://www.php.net/curl_setopt"><span class="kw3">curl_setopt</span></a><span class="br0">(</span><span class="re0">$curl</span><span class="sy0">,</span> CURLOPT_HEADER<span class="sy0">,</span> <span class="kw4">FALSE</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="sy0">@</span><a href="http://www.php.net/curl_setopt"><span class="kw3">curl_setopt</span></a><span class="br0">(</span><span class="re0">$curl</span><span class="sy0">,</span> CURLOPT_RETURNTRANSFER<span class="sy0">,</span> <span class="kw4">TRUE</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="sy0">@</span><span class="re0">$json</span> <span class="sy0">=</span> <a href="http://www.php.net/curl_exec"><span class="kw3">curl_exec</span></a><span class="br0">(</span><span class="re0">$curl</span><span class="br0">)</span><span class="sy0">;</span>
        <a href="http://www.php.net/curl_close"><span class="kw3">curl_close</span></a><span class="br0">(</span><span class="re0">$curl</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="br0">}</span> 
       <span class="kw1">return</span> <span class="re0">$json</span><span class="sy0">;</span>
     <span class="br0">}</span></pre>

<p>
Fantastic plugin, thanks - is there a way to do negative keywords on the search? (UPDATE 7/22 - WORKED!  THANKS CHRISTOPH!) — Tyler (mail at tribalcore dot com)
</p>
<blockquote><div class="no">
 Just updated the plugin. Now you can combine searchwords, e.g:</div></blockquote>
<pre class="code">//Search for PHP but NOT Zend
{{twitter&gt;search:php -zend}}
//Search for PHP AND Zend
{{twitter&gt;search:php zend}}</pre>

<p>
In theory other search parameters from the Twitter-Api should also work, but I didn't test it. 
</p>

<p>
This requires <abbr title="Hypertext Preprocessor">PHP</abbr> 5.2 or later, or alternatively you'll have to add a json_decode function, e.g. from <a href="http://au.php.net/manual/en/function.json-decode.php#91216" class="urlextern" title="http://au.php.net/manual/en/function.json-decode.php#91216">http://au.php.net/manual/en/function.json-decode.php#91216</a>  — Robert
</p>
<blockquote><div class="no">
<blockquote><div class="no">
<blockquote><div class="no">
Your plugin does not work on my server. It shows only: About 40 years, 1 month ago from. (<a href="http://www.pyload.org/beta" class="urlextern" title="http://www.pyload.org/beta">www.pyload.org/beta</a>)<br>
<a href="mailto:jhnnbr%20%5Bat%5D%20gmail%20%5Bdot%5D%20com" class="mail" title="jhnnbr [at] gmail [dot] com">Johann Bauer </a></div></blockquote>

<p>
 It seems your server is returning the wrong time to the plugin. 01.01.1970 is the start of the UNIX time, and that is what your server is returning (40years and 1 month ago). <br>
 Maybe you have to set the correct time on your server first. — C.Lang
</p>
</div></blockquote>

<p>
No, the server's time (So 7. Feb 17:49:24 CET 2010) is right (for Germany) and there aren't tweets and pictures, so that I think it's another problem
</p>
<blockquote><div class="no">
Just checked your site pyload and saw that it wasn't working. Seems your having another problem. Do you have at least <abbr title="Hypertext Preprocessor">PHP</abbr> 5.2?<br>
Maybe you can provide me with more detailed information, because I can't think of any reason for your problem.<br>
You can also contact me via Email, my mail address is on top of the page (I'm German, too).</div></blockquote>
</div></blockquote>
<blockquote><div class="no">
 Updated the plugin with cache “management” (from source plugin).</div></blockquote>

<p>
<em><a href="mailto:terminar%20%5Bat%5D%20cyberphoria%20%5Bdot%5D%20org" class="mail" title="terminar [at] cyberphoria [dot] org">Björn Kalkbrenner</a> 2010/06/18 20:15</em>
</p>

<p>
— <a href="mailto:e%20%5Bdash%5D%20team%20%5Bat%5D%20bluemel%20%5Bdot%5D%20eu" class="mail" title="e [dash] team [at] bluemel [dot] eu">Andreas</a> —
Just receiving the message:
Timeline from experimenteandi
Twitter is down….
</p>

<p>
What's wrong ?
</p>
<blockquote><div class="no">
 This was already discussed a few lines above. Check your <abbr title="Hypertext Preprocessor">PHP</abbr> Inifile for allow_url_fopen. <em><a href="mailto:calbity%20%5Bat%5D%20gmx%20%5Bdot%5D%20de" class="mail" title="calbity [at] gmx [dot] de">Christoph Lang</a></em></div></blockquote>
<blockquote><div class="no">
<blockquote><div class="no">
Twitter <abbr title="Application Programming Interface">API</abbr> has changed. I had the same error as described above: Twitter is down ….<br>
I used the new link to the Twitter <abbr title="Application Programming Interface">API</abbr> and get the plugin to work<br>
<br>
change</div></blockquote>
</div></blockquote>
<pre class="code">  @$json = $this-&gt;file_get_contents("http://twitter.com/statuses/user_timeline/".$data[2].".json".$number);</pre>
<blockquote><div class="no">
<blockquote><div class="no">
in</div></blockquote>
</div></blockquote>
<pre class="code">  @$json = $this-&gt;file_get_contents("https://api.twitter.com/1/statuses/user_timeline.json?screen_name=".$data[2]."&amp;count=5".$number);</pre>
<blockquote><div class="no">
<blockquote><div class="no">
”&amp;count=5” is the number of contributions. .$number dosent work :( unfortunately I had no time to pursue the issue with $number.<br>
<br>
Twitter <abbr title="Application Programming Interface">API</abbr> Doku V1.1 → <a href="https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline" class="urlextern" title="https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline">https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline</a><br>
<br>
<em><a href="mailto:soeldner%20%5Bat%5D%20yteam%20%5Bdot%5D%20de" class="mail" title="soeldner [at] yteam [dot] de">Dominik</a></em></div></blockquote>
</div></blockquote>

</div>
<div class="secedit editbutton_section editbutton_6"><form class="button btn_secedit" method="post" action="./plugin twitter [DokuWiki]_files/plugin twitter [DokuWiki].htm"><div class="no"><input type="hidden" name="do" value="edit"><input type="hidden" name="rev" value="1358164633"><input type="hidden" name="summary" value="[Discussion] "><input type="hidden" name="target" value="section"><input type="hidden" name="range" value="11820-"><input type="submit" value="Edit" class="button" title="Discussion"></div><input type="hidden" name="bb2_screener_" value="1360177118 115.248.50.23"></form></div>
                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo">plugin/twitter.txt · Last modified: 2013/01/14 12:57 by 109.204.125.74</div>

                            </div></div><!-- /content -->

            <hr class="a11y">

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="https://www.dokuwiki.org/plugin:twitter?do=edit&rev=0" class="action edit" accesskey="e" rel="nofollow" title="Edit this page [E]"><span>Edit this page</span></a></li><li><a href="https://www.dokuwiki.org/plugin:twitter?do=revisions" class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="https://www.dokuwiki.org/plugin:twitter?do=backlink" class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="https://www.dokuwiki.org/plugin:twitter#dokuwiki__top" class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license" class="urlextern">CC Attribution-Share Alike 3.0 Unported</a></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="./plugin twitter [DokuWiki]_files/cc-by-sa.png" alt="CC Attribution-Share Alike 3.0 Unported"></a>        <a href="http://www.dokuwiki.org/donate" title="Donate"><img src="./plugin twitter [DokuWiki]_files/button-donate.gif" width="80" height="15" alt="Donate"></a>
        <a href="http://www.php.net/" title="Powered by PHP"><img src="./plugin twitter [DokuWiki]_files/button-php.gif" width="80" height="15" alt="Powered by PHP"></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5"><img src="./plugin twitter [DokuWiki]_files/button-html5.png" width="80" height="15" alt="Valid HTML5"></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS"><img src="./plugin twitter [DokuWiki]_files/button-css.png" width="80" height="15" alt="Valid CSS"></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki"><img src="./plugin twitter [DokuWiki]_files/button-dw.png" width="80" height="15" alt="Driven by DokuWiki"></a>
    </div>
</div></div><!-- /footer -->

<div style="margin-top: 2em; font-size:90%" class="dokuwiki"><div style="float:right"><a href="http://www.splitbrain.org/personal#imprint" style="float:right; text-decoration: none; color:#333">Imprint</a></div></div><div style="width: 529px; height: 23px; background: transparent url(//www.dokuwiki.org/_dwtb/back.png) top left no-repeat; position: absolute; top: 0; padding: 2px 10px 0 10px; font: 11px Arial;"><form method="get" action="http://search.dokuwiki.org/"><a href="https://www.dokuwiki.org/" title="Read the DokuWiki documentation" style="color:#000; text-decoration: none;"><img src="./plugin twitter [DokuWiki]_files/wiki.png" alt="Wiki" border="0"></a><a href="https://forum.dokuwiki.org/" title="Ask questions in the Dokuwiki forum"><img src="./plugin twitter [DokuWiki]_files/forum.png" alt="Forum" border="0"></a><a href="http://irc.dokuwiki.org/" title="Check IRC chat logs or join the chat"><img src="./plugin twitter [DokuWiki]_files/irc.png" alt="IRC" border="0"></a><a href="https://bugs.dokuwiki.org/" title="Found a bug? Report it in the Bugtracker"><img src="./plugin twitter [DokuWiki]_files/bugs.png" alt="Bugs" border="0"></a><a href="https://github.com/splitbrain/dokuwiki" title="Access the most recent git patches"><img src="./plugin twitter [DokuWiki]_files/git.png" alt="Git" border="0"></a><a href="http://xref.dokuwiki.org/reference/dokuwiki/" title="Cross-Reference of the DokuWiki source code"><img src="./plugin twitter [DokuWiki]_files/xref.png" alt="XRef" border="0"></a><a href="http://translate.dokuwiki.org/" title="Help translating the DokuWiki interface"><img src="./plugin twitter [DokuWiki]_files/translate.png" alt="Translate" border="0"></a><input type="text" name="q" title="Search all DokuWiki sites at once" style="border: none; background: transparent url(//www.dokuwiki.org/_dwtb/searchbox.png) top left no-repeat; vertical-align: top; font: 10px Arial; width: 111px; height: 17px; margin: 0; padding: 2px 4px; display: inline;"><input type="image" src="./plugin twitter [DokuWiki]_files/search.png" alt="Search" title="Search all DokuWiki sites at once" style="border: none; background: transparent;"></form></div>
    </div></div><!-- /site -->

    <div class="no"><img src="./plugin twitter [DokuWiki]_files/indexer.php" width="2" height="1" alt=""></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->


<div id="gallery__overlay" style="display: none; position: fixed; top: 0px; left: 0px; z-index: 50; width: 100%; height: 100%;"><img id="gallery__loadingImage" src="./plugin twitter [DokuWiki]_files/loading.gif" style="position: relative; cursor: pointer;"></div><div id="gallery__lightbox" style="display: none; position: absolute; z-index: 60;"><img id="gallery__lightboxImage" style="cursor: pointer;"><img id="gallery__actionImage" style="display: none; position: absolute; top: 15px; left: 15px; z-index: 70; cursor: pointer;" src="./plugin twitter [DokuWiki]_files/expand.gif"><img id="gallery__closeButton" style="display: inline; position: absolute; right: 10px; top: 10px; z-index: 80; cursor: pointer;" src="./plugin twitter [DokuWiki]_files/close.gif"><img id="gallery__nextButton" style="display: inline; position: absolute; right: 10px; bottom: 10px; z-index: 80; cursor: pointer;" src="./plugin twitter [DokuWiki]_files/next.gif"><img id="gallery__prevButton" style="display: inline; position: absolute; left: 10px; bottom: 10px; z-index: 80; cursor: pointer;" src="./plugin twitter [DokuWiki]_files/prev.gif"><span id="gallery__lightboxCaption" style="display: none; position: absolute; z-index: 80;"></span></div></body></html>